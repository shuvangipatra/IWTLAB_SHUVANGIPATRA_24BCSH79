<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissor</title>
    <style>
        body {
            background-color: black;
            color: white;
            font-family: sans-serif;
            text-align: center;
        }

        img {
            height: 100px;
            width: 100px;
            box-sizing: border-box;
            object-fit: cover;
            background-color: black;
            transition: transform 0.2s ease;
            cursor: pointer;
            transform: scale(1.2);
        }

        .result-img {
            height: 30px;
            width: 30px;
            border-radius: 50%;
            vertical-align: middle;
        }
    </style>
</head>

<body>
    <h2>Rock Paper Scissors</h2>
    <button onclick="play('rock')"><img src="rock.png" alt="Rock"></button>
    <button onclick="play('paper')"><img src="paper.png" alt="Paper"></button>
    <button onclick="play('scissor')"><img src="scissor.png" alt="Scissor"></button>

    <p class="jre"></p>
    <p class="jmo"></p>
    <p class="jsc"></p>
    <br><br>
    <button onclick="resetScore()">Reset Score</button>
    <button class="auto" onclick="autoplay();">Auto Play</button>

    <script>
        let score = JSON.parse(localStorage.getItem('score')) || { wins: 0, losses: 0, ties: 0 };

        let isplay = false;
        let inid;
        function autoplay() {
            if (!isplay) {
                inid = setInterval(function () {
                    const randomnum = Math.random();
                    const playermove = Computermove(randomnum);
                    play(playermove);
                }, 1000);
                isplay = true;
            }
            else{
                clearInterval(inid);
                isplay = false;
            }
        }

        function play(playermove) {
            const randomnum = Math.random();
            const computermove = Computermove(randomnum);
            const result = Result(playermove, computermove);
            const updatedScore = Score(result);
            printt(playermove, computermove, result, updatedScore);
        }

        function Result(playermove, computermove) {
            if (playermove === computermove) return 'tie';
            if (
                (playermove === 'rock' && computermove === 'scissor') ||
                (playermove === 'paper' && computermove === 'rock') ||
                (playermove === 'scissor' && computermove === 'paper')
            ) return 'you win';
            return 'you lose';
        }

        function Score(result) {
            if (result === 'you win') score.wins++;
            else if (result === 'you lose') score.losses++;
            else score.ties++;
            localStorage.setItem('score', JSON.stringify(score));
            return score;
        }

        function printt(playermove, computermove, result, score) {
            document.querySelector('.jre').innerHTML = `${result}`;
            document.querySelector('.jmo').innerHTML = `
        You <img src="${playermove}.png" class="result-img">
        â€”
        <img src="${computermove}.png" class="result-img"> Computer
      `;
            document.querySelector('.jsc').innerHTML = `Wins: ${score.wins} | Losses: ${score.losses} | Ties: ${score.ties}`;
        }

        function Computermove(randomnum) {
            if (randomnum < 1 / 3) return 'rock';
            else if (randomnum < 2 / 3) return 'paper';
            return 'scissor';
        }

        function resetScore() {
            score = { wins: 0, losses: 0, ties: 0 };
            localStorage.removeItem('score');
            document.querySelector('.jre').innerHTML = '';
            document.querySelector('.jmo').innerHTML = '';
            document.querySelector('.jsc').innerHTML = 'Score reset!';
        }
    </script>
</body>

</html>